(this["webpackJsonptodos-list-hook"]=this["webpackJsonptodos-list-hook"]||[]).push([[0],{36:function(e,t,n){},46:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(16),s=n.n(a),o=(n(46),n(2)),i=n.n(o),u=n(3),l=n(4),d=n(6),p=n(7),j=n(21),b=n.n(j),f=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"},method:"POST",url:"https://api-nodejs-todolist.herokuapp.com/user/login",data:{email:t,password:n}},e.next=3,b()(r).then((function(e){return e})).catch((function(e){return e.response}));case 3:return c=e.sent,(a=c.data.token)&&sessionStorage.setItem("tdl-token",a),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"},method:"POST",url:"https://api-nodejs-todolist.herokuapp.com/user/register",data:{name:t.name,email:t.email,password:t.password,age:t.age}},e.next=3,b()(n).then((function(e){return e})).catch((function(e){return e.response}));case 3:return r=e.sent,(c=r.data.token)&&sessionStorage.setItem("tdl-token",c),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return function(){var e=sessionStorage.getItem("tdl-token");return b.a.create({baseURL:"https://api-nodejs-todolist.herokuapp.com/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e," ")}})}()(e).then((function(e){return e})).catch((function(e){return Promise.reject(e.response||e.message)}))},O=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({url:"task"}).then((function(e){return e})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.completed,e.next=3,m({url:"task/".concat(n),method:"PUT",data:{completed:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({url:"task/".concat(t),method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({url:"task",method:"POST",data:{description:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=n(1),k=Object(r.createContext)(),_=function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],a=n[1],s=Object(p.g)();return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,(n=t.data.data).length>0&&(r=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e._id})})),a(r));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();sessionStorage.getItem("tdl-token")?e():s.push("/")}),[s]),Object(w.jsx)(k.Provider,{value:[c,a],children:e.children})},y=(n(36),n(40)),S=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(d.a)(a,2),o=s[0],u=s[1],j=Object(p.g)(),b=Object(r.useState)(!1),h=Object(d.a)(b,2),m=h[0],O=h[1],x=Object(r.useState)(sessionStorage.getItem("tdl-token")),v=Object(d.a)(x,2),g=v[0],k=v[1];Object(r.useEffect)((function(){console.log(g),g&&j.push("/my-task")}),[g,j]);var _=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(n,o);case 3:200!==(r=e.sent).status?r.data.includes("Unable to login")&&O(!0):k(sessionStorage.getItem("tdl-token"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"login__form",children:[m?Object(w.jsxs)(y.a,{variant:"warning",onClose:function(){return O(!1)},dismissible:!0,children:[Object(w.jsx)("strong",{children:"Sorry!"})," Your email or password is not correct"]}):null,Object(w.jsxs)("form",{onSubmit:_,children:[Object(w.jsx)("input",{classname:"login__form__email",type:"email",placeholder:"Email",value:n,onChange:function(e){c(e.target.value)}}),Object(w.jsx)("input",{className:"login__form__password",type:"password",placeholder:"Password",value:o,onChange:function(e){u(e.target.value)}}),Object(w.jsx)("button",{className:"login__form__submit",type:"submit",id:"login-button",children:"Login"})]})]})},C=n(15),N=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=window.location.href;console.log(e),e.endsWith("/")?c("Login"):e.endsWith("/sign-up")&&c("Sign up")}),[n]),Object(w.jsx)("div",{className:"headbar",children:Object(w.jsxs)("div",{className:"headbar__items",children:[Object(w.jsx)(C.b,{to:"/",children:Object(w.jsx)("div",{className:"Login"===n?"headbar__item active":"headbar__item",onClick:function(){return c("Login")},children:"Login"})}),Object(w.jsx)(C.b,{to:"/sign-up",children:Object(w.jsx)("div",{className:"Sign up"===n?"headbar__item active":"headbar__item",onClick:function(){return c("Sign up")},children:"Sign up"})})]})})},E=function(){return Object(w.jsx)("div",{className:"loginScreen",children:Object(w.jsx)("div",{className:"login-wrapper",children:Object(w.jsxs)("div",{className:"login",children:[Object(w.jsx)("h1",{children:"Welcome"}),Object(w.jsx)(N,{}),Object(w.jsx)(S,{})]})})})},L=n(18),T=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(k),s=Object(d.a)(a,2),o=s[0],u=s[1],p=Object(r.useCallback)((function(){return o.filter((function(e){return!1===e.completed}))}),[o]);Object(r.useEffect)((function(){p().length>0?c(!1):c(!0)}),[n,p,o]);var j=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.completed,e.next=3,x({id:n,completed:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:0===o.length?Object(w.jsx)("h2",{children:"Congratulations! Nothings to do"}):Object(w.jsxs)("div",{className:"footer-wrapper",children:[Object(w.jsxs)("label",{htmlFor:"all",children:[Object(w.jsx)("input",{type:"checkbox",name:"all",id:"all",onClick:function(){var e=Object(L.a)(o);e.forEach(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed=!n,e.next=3,j({id:t.id,completed:t.completed});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(e),c(!n)},checked:n}),"All"]}),Object(w.jsxs)("p",{children:["You have ",p().length," to do"]}),Object(w.jsx)("button",{className:"DeleteAll",onClick:function(){Object(L.a)(o).forEach(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u([])},children:"Delete All"})]})})},I=function(){var e=Object(r.useContext)(k),t=Object(d.a)(e,2),n=(t[0],t[1]),c=Object(r.useState)(""),a=Object(d.a)(c,2),s=a[0],o=a[1],p=Object(r.useRef)(),j=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,(r=t.data.data).length>0&&(c=r.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e._id})})),n(c));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j(s);case 3:b(),o(""),p.current.focus();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p.current.focus()})),Object(w.jsx)("div",{className:"form-wrapper",children:Object(w.jsxs)("form",{className:"form-body",autoComplete:"off",onSubmit:f,children:[Object(w.jsx)("input",{className:"form-body__create",type:"text",name:"todos",id:"todos",ref:p,required:!0,placeholder:"What needs to be done?",value:s,onChange:function(e){return o(e.target.value.toLowerCase())}}),Object(w.jsx)("button",{className:"form-body__submit",type:"submit",children:"Create"})]})})},P=function(e){var t=e.todo,n=e.id,c=e.checkComplete,a=e.handleEditTodos,s=Object(r.useState)(!1),o=Object(d.a)(s,2),u=o[0],p=o[1],j=Object(r.useState)(t.description),b=Object(d.a)(j,2),f=b[0],h=b[1],m=Object(r.useContext)(k),O=Object(d.a)(m,2),x=O[0],g=O[1],_=Object(r.useCallback)(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),y=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(x.filter((function(e){return e.id!==t}))),e.next=3,_(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?Object(w.jsxs)("li",{children:[Object(w.jsx)("input",{type:"text",id:"editValue",value:f,name:"editValue",onChange:function(e){return h(e.target.value.toLowerCase())}}),Object(w.jsx)("button",{onClick:function(){return function(e){p(!1),f?a(f,e):h(t.description)}(t.id)},children:"Save"})]}):Object(w.jsxs)("li",{className:t.completed?"active":"",children:[Object(w.jsxs)("label",{htmlFor:t.id,className:t.completed?"active":"",children:[Object(w.jsx)("input",{type:"checkbox",id:t.id,checked:t.completed,onChange:function(){return c(n)}}),t.description]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"Edit",disabled:t.completed,onClick:function(e){p(!0)},children:"Edit"}),Object(w.jsx)("button",{className:"Delete",onClick:function(){return y(t.id)},children:"Delete"})]})]})},D=function(){var e=Object(r.useContext)(k),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useCallback)(function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.completed,e.next=3,x({id:n,completed:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),(r=Object(L.a)(n)).forEach(function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id!==t){e.next=4;break}return n.completed=!n.completed,e.next=4,a({id:n.id,completed:n.completed});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e,t){var r=Object(L.a)(n);r.forEach((function(n){n.id===t&&(n.description=e)})),c(r)};return Object(w.jsx)("div",{className:"list-wrapper",children:Object(w.jsx)("ul",{className:"list-body",children:n.map((function(e,t){return Object(w.jsx)(P,{todo:e,id:e.id,checkComplete:s,handleEditTodos:o},t)}))})})},F=(n(72),function(){var e=Object(p.g)(),t=Object(r.useState)(sessionStorage.getItem("tdl-token")),n=Object(d.a)(t,2),c=n[0],a=n[1];Object(r.useEffect)((function(){""===c&&e.push("/")}),[c,e]);return Object(w.jsxs)("div",{className:"homescreen",children:[Object(w.jsx)("h1",{children:"To do List"}),Object(w.jsx)(I,{}),Object(w.jsx)(D,{}),Object(w.jsx)(T,{}),Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("button",{className:"Logout",onClick:function(){sessionStorage.removeItem("tdl-token"),a("")},children:"Log out"})})]})}),A=n(17),q=(n(73),function(){var e=Object(r.useState)({email:"",password:"",name:"",age:""}),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(sessionStorage.getItem("tdl-token")),s=Object(d.a)(a,2),o=s[0],j=s[1],b=Object(r.useState)(!1),f=Object(d.a)(b,2),m=f[0],O=f[1],x=Object(p.g)();Object(r.useEffect)((function(){o&&x.push("/my-task")}),[o,x]);var v=function(e){c(Object(u.a)(Object(u.a)({},n),{},Object(A.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h(n);case 3:201!==(r=e.sent).status?r.data.includes("duplicate")&&O(!0):j(sessionStorage.getItem("tdl-token"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"signup__form",children:[m?Object(w.jsxs)(y.a,{variant:"warning",onClose:function(){return O(!1)},dismissible:!0,children:[Object(w.jsx)("strong",{children:"Sorry!"})," Your email has been used :("]}):null,Object(w.jsxs)("form",{onSubmit:g,children:[Object(w.jsx)("input",{classname:"signup__form__email",name:"email",type:"email",placeholder:"Email",value:n.email,onChange:v,required:!0}),Object(w.jsx)("input",{className:"signup__form__password",name:"password",type:"password",placeholder:"Password",value:n.password,onChange:v,minLength:"7",required:!0}),Object(w.jsx)("input",{className:"signup__form__name",name:"name",type:"text",placeholder:"Name",value:n.name,onChange:v,required:!0}),Object(w.jsx)("input",{className:"signup__form__age",name:"age",type:"number",placeholder:"Age",value:n.age,min:"1",max:"100",onChange:v,required:!0}),Object(w.jsx)("button",{className:"signup__form__submit",type:"submit",id:"login-button",children:"Sign up"})]})]})}),W=function(){return Object(w.jsx)("div",{className:"signupScreen",children:Object(w.jsx)("div",{className:"signup-wrapper",children:Object(w.jsxs)("div",{className:"signup",children:[Object(w.jsx)("h1",{children:"Welcome"}),Object(w.jsx)(N,{}),Object(w.jsx)(q,{})]})})})};var B=function(){return Object(w.jsx)(C.a,{children:Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(p.d,{children:[Object(w.jsx)(p.b,{exact:!0,path:"/",children:Object(w.jsx)(E,{})}),Object(w.jsx)(p.b,{path:"/my-task",children:Object(w.jsx)(_,{children:Object(w.jsx)(F,{})})}),Object(w.jsx)(p.b,{path:"/sign-up",children:Object(w.jsx)(W,{})}),Object(w.jsx)(p.b,{children:Object(w.jsx)(p.a,{to:"/"})})]})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(B,{})}),document.getElementById("root")),U()}},[[74,1,2]]]);
//# sourceMappingURL=main.9d610b58.chunk.js.map